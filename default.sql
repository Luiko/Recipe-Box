
CREATE TABLE IF NOT EXISTS RECIPES(
  ID INTEGER PRIMARY KEY AUTOINCREMENT,
  NAME TEXT NOT NULL,
  CONSTRAINT RECIPES_UNIQUE_NAME UNIQUE (NAME)
);
INSERT INTO RECIPES VALUES(1, "Mango con chile");
INSERT INTO RECIPES VALUES(2, "Pumpkin Pie");
INSERT INTO RECIPES VALUES(3, "Spaghetti");
INSERT INTO RECIPES VALUES(4, "Onion Pie");

CREATE TABLE IF NOT EXISTS INGREDIENTS(
  ID INTEGER PRIMARY KEY AUTOINCREMENT,
  NAME TEXT NOT NULL,
  CONSTRAINT INGREDIENT_UNIQUE_NAME UNIQUE (NAME)
);
INSERT INTO INGREDIENTS VALUES(1, "mango");
INSERT INTO INGREDIENTS VALUES(2, "salt");
INSERT INTO INGREDIENTS VALUES(3, "lemon");
INSERT INTO INGREDIENTS VALUES(4, "chilli powder");
INSERT INTO INGREDIENTS VALUES(5, "Pumpkin Puree");
INSERT INTO INGREDIENTS VALUES(6, "weetened Condensed Milk");
INSERT INTO INGREDIENTS VALUES(7, "Eggs");
INSERT INTO INGREDIENTS VALUES(8, "Pumpkin Pie Spice");
INSERT INTO INGREDIENTS VALUES(9, "Pie Crust");
INSERT INTO INGREDIENTS VALUES(10, "Noodles");
INSERT INTO INGREDIENTS VALUES(11, "Tomato Sauce");
INSERT INTO INGREDIENTS VALUES(12, "(Optional) Meatballs");
INSERT INTO INGREDIENTS VALUES(13, "Onion");

CREATE TABLE IF NOT EXISTS RECIPE_INGREDIENT(
  ID INTEGER PRIMARY KEY AUTOINCREMENT,
  IDRECIPE INTEGER NOT NULL,
  IDINGREDIENT INTEGER NOT NULL,
  CONSTRAINT RECIPE_FK_IDRECIPE FOREIGN KEY (IDRECIPE)
    REFERENCES RECIPES (ID),
  CONSTRAINT INGREDIENT_FK_IDINGREDIENT FOREIGN KEY (IDINGREDIENT)
    REFERENCES INGREDIENTS (ID)
);
INSERT INTO RECIPE_INGREDIENT VALUES(1, 1, 1);
INSERT INTO RECIPE_INGREDIENT VALUES(2, 1, 2);
INSERT INTO RECIPE_INGREDIENT VALUES(3, 1, 3);
INSERT INTO RECIPE_INGREDIENT VALUES(4, 1, 4);
INSERT INTO RECIPE_INGREDIENT VALUES(5, 2, 5);
INSERT INTO RECIPE_INGREDIENT VALUES(6, 2, 6);
INSERT INTO RECIPE_INGREDIENT VALUES(7, 2, 7);
INSERT INTO RECIPE_INGREDIENT VALUES(8, 2, 8);
INSERT INTO RECIPE_INGREDIENT VALUES(9, 2, 9);
INSERT INTO RECIPE_INGREDIENT VALUES(10, 3, 10);
INSERT INTO RECIPE_INGREDIENT VALUES(11, 3, 11);
INSERT INTO RECIPE_INGREDIENT VALUES(12, 3, 12);
INSERT INTO RECIPE_INGREDIENT VALUES(13, 4, 13);
INSERT INTO RECIPE_INGREDIENT VALUES(14, 4, 9);

CREATE VIEW ALLDATA AS
SELECT RI.ID, R.NAME AS RECIPE, I.NAME AS INGREDIENT
FROM RECIPES R, RECIPE_INGREDIENT RI,INGREDIENTS I
WHERE R.ID = RI.IDRECIPE AND RI.IDINGREDIENT = I.ID
